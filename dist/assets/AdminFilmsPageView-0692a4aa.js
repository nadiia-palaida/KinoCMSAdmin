import{u as B,v as C,b as K,c as h,_ as D,a as P,F as J}from"./RadioComponent-19ad4cd0.js";import{a as O,r as N,d as L,J as X,f as F,u as M,e as z,b as H}from"./general-a8861d35.js";import{o as i,e as r,F as x,r as A,s as Q,b as s,t as $,d as b,f as S,g as U,x as W,l as Y,i as d,j as Z,k as ee,a as le}from"./index-82815141.js";const ae={class:"nav nav-pills"},se=["onClick"],te={__name:"TabsComponent",props:{options:{type:Array,required:!0},modelValue:{}},emits:["update:modelValue"],setup(u,{emit:m}){function n(f){m("update:modelValue",f)}return(f,_)=>(i(),r("ul",ae,[(i(!0),r(x,null,A(u.options,l=>(i(),r("li",{class:Q(["nav-item tab-item",{active:u.modelValue===l.value}])},[s("button",{onClick:g=>n(l.value),class:"nav-link"},$(l.label),9,se)],2))),256))]))}},E=[{label:"Українська",value:"ua"},{label:"Російська",value:"ru"}],oe={class:"input"},ie={class:"input__wrap"},ue={class:"input__label d-flex align-items-center"},ne={class:"input__label-text mr-1"},re={class:"input__item-wrap"},de=["value","name","type","placeholder"],me={key:0,class:"input__error error"},R={__name:"TextareaComponent",props:{type:{type:String,default:"text"},placeholder:{type:String},errors:{type:Array},label:{type:String},name:{type:String,required:!0},modelValue:{required:!0},rules:{}},emits:["update:modelValue"],setup(u){const m=u,{errorMessage:n,value:f}=B(()=>m.name,m.rules);return(_,l)=>(i(),r("div",oe,[s("div",ie,[s("label",ue,[s("span",ne,$(u.label)+":",1),s("span",re,[s("textarea",{value:u.modelValue,name:u.name,type:u.type,placeholder:u.placeholder,onInput:l[0]||(l[0]=g=>_.$emit("update:modelValue",g.target.value)),class:"form-control input__item w-100",rows:"6"},null,40,de),b(n)?(i(),r("span",me,$(b(n)),1)):S("",!0)])])])]))}},ce={class:"d-flex position-relative mb-3"},pe={class:"input-group mr-3"},ve={class:"input-group-prepend"},fe={class:"input-group-text"},_e=["name","onChange","checked"],ge={class:"ml-2"},be={key:0,class:"input__error error"},Ve={__name:"CheckboxComponent",props:{name:{type:String,required:!0},options:{type:Array,required:!0},modelValue:{},rules:{},errors:{type:Array}},emits:["update:modelValue"],setup(u,{emit:m}){const n=u;function f(g,v){g?n.modelValue.includes(v)||m("update:modelValue",[...n.modelValue,v]):n.modelValue.includes(v)&&m("update:modelValue",[...n.modelValue.filter(e=>e!==v)])}const{errorMessage:_,value:l}=B(()=>n.name,n.rules);return(g,v)=>(i(),r("div",ce,[(i(!0),r(x,null,A(u.options,e=>(i(),r("div",pe,[s("div",ve,[s("div",fe,[s("label",null,[s("input",{type:"checkbox",name:u.name,onChange:k=>f(k.target.checked,e.value),checked:u.modelValue.includes(e.value),"aria-label":"Checkbox for following text input"},null,40,_e),s("span",ge,$(e.label),1)])])])]))),256)),b(_)?(i(),r("span",be,$(b(_)),1)):S("",!0)]))}},ye={key:0,class:"overlay overlay-page"},he=s("i",{class:"fas fa-2x fa-sync-alt fa-spin"},null,-1),$e=[he],xe={class:"d-flex mb-4"},ke=s("div",{class:"input__label-text"},"Головна картинка",-1),we={class:"mb-4"},Ie=s("div",{class:"mb-2"},[s("div",{class:"input__label-text"},"Галерея картинок"),s("div",{class:"input__label-text"},"Размер: 1000х190")],-1),Ue={type:"button",class:"btn btn-info mb-4"},Ae={key:0,class:"d-flex flex-wrap"},Se={class:"d-flex mb-4"},qe=s("div",{class:"mr-4"},"Тип фільму",-1),Ce={class:"d-flex"},De={class:"d-flex mb-4"},Ne=s("div",{class:"mr-4"},"Показ фільму",-1),Le={class:"d-flex"},Fe={class:"seo-block"},Me=s("h4",{class:"text-center mb-4"},"Seo блок",-1),Ee={type:"submit",class:"btn btn-success"},Re={key:0,class:"spinner-border spinner-border-sm",role:"status"},Be=s("span",{class:"sr-only"},"Loading...",-1),Ge=[Be],Te={key:1},Je={__name:"AdminFilmsPageView",setup(u){const m=O(),n=U(!1),f="ua",_="ru",l=U(null),g=[{label:"3D",value:"3D"},{label:"2D",value:"2D"},{label:"IMAX",value:"IMAX"}],v=[{label:"В прокаті",value:"isShow"},{label:"Скоро вийде",value:"showSoon"}],e=U({id:C(),type:[],status:null,ua:{name:"",description:"",poster:{},images:[],trailer:"",seo:{url:"",title:"",keywords:"",description:""}},ru:{name:"",description:"",poster:{},images:[],trailer:"",seo:{url:"",title:"",keywords:"",description:""}}});function k(c){if(c.target.files.length)for(let a=0;a<c.target.files.length;a++)e.value[l.value].images.push({fileId:C(),file:c.target.files[a]})}function G(c){e.value[l.value].images.splice(c,1)}function T(){e.value[l.value].poster={}}const w=W();async function j(){if(K()){n.value=!0;let a={id:e.value.id,type:e.value.type,status:e.value.status};for(let p in e.value)if(p===f||p===_){let V=[];const o=e.value[p];for(let I=0;I<o.images.length;I++){let y=o.images[I];V.push({fileId:y.fileId,file:await F(y.fileId,`films/${e.value.id}`)?y.file:await M(`films/${e.value.id}/${y.fileId}`,y.file)})}let q=o.poster;Object.keys(o.poster).length&&(q={fileId:o.poster.fileId,file:await F(o.poster.fileId,`films/${e.value.id}`)?o.poster.file:await M(`films/${e.value.id}/${o.poster.fileId}`,o.poster.file)}),a={...a,[p]:{name:o.name,description:o.description,poster:q,images:V,trailer:o.trailer,seo:{url:o.seo.url,title:o.seo.title,keywords:o.seo.keywords,description:o.seo.description}}}}const t=N(L,"films",e.value.id);w.params.id?await z(t,a):await H(t,a),n.value=!1}}return Y(async()=>{if(l.value=E[0].value,w.params.id){const c=N(L,"films",w.params.id),a=await X(c);a.exists()&&(e.value=a.data())}else e.value.status=v[0].value;m.setLoading(!1)}),(c,a)=>b(m).isLoading?(i(),r("div",ye,$e)):(i(),r(x,{key:1},[d(te,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=t=>l.value=t),options:b(E),class:"mb-4"},null,8,["modelValue","options"]),d(b(J),{onSubmit:j},{default:Z(()=>[d(h,{modelValue:e.value[l.value].name,"onUpdate:modelValue":a[1]||(a[1]=t=>e.value[l.value].name=t),name:"film-name",label:"Назва фільму",rules:"required",class:"col-3 mb-4"},null,8,["modelValue"]),d(R,{modelValue:e.value[l.value].description,"onUpdate:modelValue":a[2]||(a[2]=t=>e.value[l.value].description=t),name:"film-description",label:"Опис",rules:"required",class:"mb-4"},null,8,["modelValue"]),s("div",xe,[ke,d(D,{modelValue:e.value[l.value].poster,"onUpdate:modelValue":a[3]||(a[3]=t=>e.value[l.value].poster=t),onDeleteImage:T,name:"film-poster","has-text":!1,"has-url":!1,class:"col-2"},null,8,["modelValue"])]),s("div",we,[Ie,s("label",Ue,[ee(" Додати фото "),s("input",{onChange:k,type:"file",multiple:"",accept:"image/png, image/jpeg, image/jpg, image/webp, image/svg",class:"image-upload__input"},null,32)]),e.value[l.value].images.length?(i(),r("div",Ae,[(i(!0),r(x,null,A(e.value[l.value].images,(t,p)=>(i(),le(D,{modelValue:e.value[l.value].images[p],"onUpdate:modelValue":V=>e.value[l.value].images[p]=V,onDeleteImage:V=>G(p),name:"film-image","has-text":!1,"has-url":!1,class:"col-2 mb-2",key:`film-image-${p}`},null,8,["modelValue","onUpdate:modelValue","onDeleteImage"]))),128))])):S("",!0)]),d(h,{modelValue:e.value[l.value].trailer,"onUpdate:modelValue":a[4]||(a[4]=t=>e.value[l.value].trailer=t),name:"film-trailer",label:"Посилання на трейлер",rules:"required",class:"mb-4"},null,8,["modelValue"]),s("div",Se,[qe,s("div",Ce,[d(Ve,{modelValue:e.value.type,"onUpdate:modelValue":a[5]||(a[5]=t=>e.value.type=t),options:g,name:"film-type",rules:"required"},null,8,["modelValue"])])]),s("div",De,[Ne,s("div",Le,[d(P,{modelValue:e.value.status,"onUpdate:modelValue":a[6]||(a[6]=t=>e.value.status=t),options:v,name:"film-type",rules:"required"},null,8,["modelValue"])])]),s("div",Fe,[Me,d(h,{modelValue:e.value[l.value].seo.url,"onUpdate:modelValue":a[7]||(a[7]=t=>e.value[l.value].seo.url=t),name:"seo-url",label:"URL",rules:"required",class:"mb-4"},null,8,["modelValue"]),d(h,{modelValue:e.value[l.value].seo.title,"onUpdate:modelValue":a[8]||(a[8]=t=>e.value[l.value].seo.title=t),name:"seo-title",label:"Title",rules:"required",class:"mb-4"},null,8,["modelValue"]),d(h,{modelValue:e.value[l.value].seo.keywords,"onUpdate:modelValue":a[9]||(a[9]=t=>e.value[l.value].seo.keywords=t),name:"seo-keywords",label:"Keywords",rules:"required",class:"mb-4"},null,8,["modelValue"]),d(R,{modelValue:e.value[l.value].seo.description,"onUpdate:modelValue":a[10]||(a[10]=t=>e.value[l.value].seo.description=t),name:"seo-description",label:"Description",rules:"required",class:"mb-4"},null,8,["modelValue"])]),s("button",Ee,[n.value?(i(),r("div",Re,Ge)):(i(),r("span",Te,"Зберегти"))])]),_:1})],64))}};export{Je as default};
