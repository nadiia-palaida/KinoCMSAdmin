import{o as u,e as c,b as n,t as y,f as I,F as N,r as x,d as h,g as b,c as D,h as M,w as $,v as P,i as _,j as S,k as T,a as F,l as O,m as w,n as R,p as q}from"./index-4ab8acf7.js";import{u as j,_ as E,F as A,v as V,a as G}from"./RadioComponent-423dcc7b.js";import{f as U,u as L,a as K,t as Y,s as z,b as H,r as W,d as B}from"./general-611ead53.js";const J={class:"input-group mb-4"},Q={key:0,class:"input-group-prepend"},X=["for"],Z=["value","name","id"],ee=["value"],ae={key:1,class:"input__error"},se={__name:"SelectComponent",props:{label:{type:String},options:{type:Array,required:!0},modelValue:{},name:{type:String,required:!0},rules:{}},emits:["update:modelValue"],setup(o){const m=o,{errorMessage:t,value:v}=j(()=>m.name,m.rules);return(a,f)=>(u(),c("div",J,[o.label?(u(),c("div",Q,[n("label",{class:"input-group-text",for:o.name},y(o.label),9,X)])):I("",!0),n("select",{value:o.modelValue,onChange:f[0]||(f[0]=i=>a.$emit("update:modelValue",i.target.value)),class:"custom-select",name:o.name,id:o.name},[(u(!0),c(N,null,x(o.options,i=>(u(),c("option",{value:i.value},y(i.label),9,ee))),256))],40,Z),h(t)?(u(),c("span",ae,y(h(t)),1)):I("",!0)]))}},ne={class:"admin__section"},te={key:0,class:"text-center mb-4"},le={class:"admin__block shadow-lg rounded p-3"},oe={class:"admin__switch-wrap"},ie={class:"custom-control custom-switch custom-switch-lg admin__switch ml-auto"},ue=n("label",{class:"custom-control-label",for:"customSwitch1"},null,-1),re=n("div",{class:"mb-4"},"Размер: 1000х190",-1),de={type:"button",class:"btn btn-info mb-4"},ce={class:"admin__form-images mb-2"},me={type:"submit",class:"btn btn-success"},ve={key:0,class:"spinner-border spinner-border-sm",role:"status"},fe=n("span",{class:"sr-only"},"Loading...",-1),pe=[fe],be={key:1},C={__name:"BannersMultiple",props:{bannersInfo:{type:Object,required:!0},loading:{type:Boolean,default:!1},title:{type:String},firebasePathName:{type:String,required:!0}},emits:["saveChanges"],setup(o,{emit:m}){const t=o,v=[{label:"5",value:5},{label:"10",value:10},{label:"15",value:15},{label:"20",value:20},{label:"30",value:30}],a=b({active:!0,items:[],speed:0}),f=D(()=>a.value.items);function i(s,e){a.value.items[e]?a.value.items[e]=s:a.value.items.push(s)}function r(s){if(s.target.files.length)for(let e=0;e<s.target.files.length;e++)a.value.items.push({id:V(),fileId:V(),file:s.target.files[e],url:"",text:""})}function d(s){a.value.items.splice(s,1)}async function g(){let s=[];for(let l=0;l<a.value.items.length;l++){let p=a.value.items[l];s.push({id:p.id,fileId:p.fileId,file:await U(p.fileId,t.firebasePathName)?p.file:await L(`${t.firebasePathName}/${p.fileId}`,p.file),url:p.url,text:p.text})}a.value.items=s;const e={active:a.value.active,items:s,speed:a.value.speed};m("saveChanges",e)}return M(()=>{console.log("banners",t.bannersInfo),a.value=t.bannersInfo,a.value.speed||(a.value.speed=v[0].value)}),(s,e)=>(u(),c("section",ne,[o.title?(u(),c("h2",te,y(o.title),1)):I("",!0),n("div",le,[n("div",oe,[n("div",ie,[$(n("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>a.value.active=l),type:"checkbox",class:"custom-control-input",id:"customSwitch1"},null,512),[[P,a.value.active]]),ue])]),re,_(h(A),{onSubmit:g},{default:S(()=>[n("label",de,[T(" Додати фото "),n("input",{onChange:r,type:"file",multiple:"",accept:"image/png, image/jpeg, image/jpg, image/webp, image/svg",class:"image-upload__input"},null,32)]),n("div",ce,[h(f)?(u(!0),c(N,{key:0},x(h(f),(l,p)=>(u(),F(E,{modelValue:l,"onUpdate:modelValue":k=>i(k,p),onDeleteImage:k=>d(p),class:"mr-4 mb-4",key:`top-banner-image-${l.id}`},null,8,["modelValue","onUpdate:modelValue","onDeleteImage"]))),128)):I("",!0)]),_(se,{modelValue:a.value.speed,"onUpdate:modelValue":e[1]||(e[1]=l=>a.value.speed=l),options:v,label:"Швидкість каруселі",name:"top-banners-carousel-speed",class:"col-3"},null,8,["modelValue"]),n("button",me,[o.loading?(u(),c("div",ve,pe)):(u(),c("span",be,"Зберегти"))])]),_:1})])]))}},_e={class:"admin__section"},ge=n("h2",{class:"text-center mb-4"},"Банер на фоні",-1),he={class:"admin__block shadow-lg rounded p-3"},ye=n("div",{class:"mb-4"},"Размер: 2000х3000",-1),$e={class:"d-flex"},Ie=n("span",{class:"mr-2"},"Вибрати колір",-1),Ne={type:"submit",class:"btn btn-success"},ke={key:0,class:"spinner-border spinner-border-sm",role:"status"},we=n("span",{class:"sr-only"},"Loading...",-1),Ve=[we],Be={key:1},Ce={__name:"BannerBackground",props:{bannersInfo:{type:Object,required:!0},loading:{type:Boolean,default:!1},firebasePathName:{type:String,required:!0}},emits:["saveChanges"],setup(o,{emit:m}){const t=o,v="photo",a="color",f=[{label:" Фото на фон",value:"photo"},{label:"Просто фон",value:"color"}],i=b(null),r=b({file:"",fileId:""}),d=b(null);async function g(){let s=null;d.value===v?(s=r.value,s.file=await U(r.value.fileId,t.firebasePathName)?r.value.file:await L(`${t.firebasePathName}/${r.value.fileId}`,r.value.file)):s=i.value;const e={type:d.value,banner:s};m("saveChanges",e)}return O(()=>{t.bannersInfo.type?(d.value=t.bannersInfo.type,t.bannersInfo.type===v?t.bannersInfo.banner&&t.bannersInfo.banner.hasOwnProperty("file")&&(r.value=t.bannersInfo.banner):t.bannersInfo.type===a&&(i.value=t.bannersInfo.banner)):d.value=f[0].value}),(s,e)=>(u(),c("div",_e,[ge,n("div",he,[ye,_(h(A),{onSubmit:g},{default:S(()=>[n("div",$e,[_(G,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=l=>d.value=l),options:f,name:"background-banner-radio",class:"mr-4"},null,8,["modelValue"]),$(_(E,{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=l=>r.value=l),hasUrl:!1,hasText:!1,class:"col-2"},null,8,["modelValue"]),[[w,d.value===v]]),$(n("div",null,[n("label",null,[Ie,$(n("input",{type:"color","onUpdate:modelValue":e[2]||(e[2]=l=>i.value=l)},null,512),[[R,i.value]])]),n("div",{class:"choose-color",style:q(`background: ${i.value}`)},null,4)],512),[[w,d.value===a]])]),n("button",Ne,[o.loading?(u(),c("div",ke,Ve)):(u(),c("span",Be,"Зберегти"))])]),_:1})])]))}},xe={key:0,class:"overlay overlay-page"},Se=n("i",{class:"fas fa-2x fa-sync-alt fa-spin"},null,-1),Oe=[Se],Le={__name:"AdminBannersView",setup(o){const m=b({}),t=K();b(!0);const v=b(!1),a=b(!1),f=b(!1),i="topBanners",r="newsBanners",d="backgroundBanner";async function g(s,e){e===i?v.value=!0:e===r?a.value=!0:e===d&&(f.value=!0),await H(W(B,"banners",e),s),e===i?v.value=!1:e===r?a.value=!1:e===d&&(f.value=!1)}return O(async()=>{t.setLoading(!0),m.value=await Y(z(B,"banners")),m.value.forEach(s=>{m.value[s.id]=s.data()}),t.setLoading(!1)}),(s,e)=>h(t).isLoading?(u(),c("div",xe,Oe)):(u(),c(N,{key:1},[_(C,{"banners-info":m.value[i],onSaveChanges:e[0]||(e[0]=l=>g(l,i)),firebasePathName:"top-banners",loading:v.value,title:"На головній верх",class:"mb-5"},null,8,["banners-info","loading"]),_(Ce,{"banners-info":m.value[d],firebasePathName:"background-banner",onSaveChanges:e[1]||(e[1]=l=>g(l,d)),class:"mb-5"},null,8,["banners-info"]),_(C,{"banners-info":m.value[r],onSaveChanges:e[2]||(e[2]=l=>g(l,r)),firebasePathName:"news-banners",loading:a.value,title:"На головній новини, акції",class:"mb-5"},null,8,["banners-info","loading"])],64))}};export{Le as default};
