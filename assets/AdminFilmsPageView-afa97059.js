import{u as B,a as L,_,F as T}from"./InputComponent-926cc09d.js";import{_ as U}from"./TextareaComponent-3fceddef.js";import{_ as I}from"./ImageUpload-734539ec.js";import{_ as M}from"./RadioComponent-1176aee6.js";import{o as u,e as n,F as $,k as C,b as t,t as q,d as g,f as F,r as w,s as N,l as j,h as o,i as K,j as P,a as R}from"./index-5ccc9495.js";import{_ as G}from"./TabsComponent-2b439d40.js";import"./vee-validate-6f28d402.js";import{l as V}from"./languages-14535d94.js";import{r as X,d as E,b as O,a as z}from"./index-2c7431f0.js";import{u as H}from"./general-e95eafb2.js";import{p as J,a as Q}from"./preparedDataToFirebase-469b79a8.js";import{a as W}from"./queriesFirestore-d3fa99f6.js";import{v as D}from"./v4-a960c1f4.js";import"./index-dbcece3d.js";const Y={class:"d-flex position-relative mb-3"},Z={class:"input-group mr-3"},ee={class:"input-group-prepend"},le={class:"input-group-text"},ae=["name","onChange","checked"],se={class:"ml-2"},te={key:0,class:"input__error error"},oe={__name:"CheckboxComponent",props:{name:{type:String,required:!0},options:{type:Array,required:!0},modelValue:{},rules:{},errors:{type:Array}},emits:["update:modelValue"],setup(v,{emit:f}){const i=v;function a(e,m){e?i.modelValue.includes(m)||f("update:modelValue",[...i.modelValue,m]):i.modelValue.includes(m)&&f("update:modelValue",[...i.modelValue.filter(p=>p!==m)])}const{errorMessage:b,value:y}=B(()=>i.name,i.rules);return(e,m)=>(u(),n("div",Y,[(u(!0),n($,null,C(v.options,p=>(u(),n("div",Z,[t("div",ee,[t("div",le,[t("label",null,[t("input",{type:"checkbox",name:v.name,onChange:h=>a(h.target.checked,p.value),checked:v.modelValue.includes(p.value),"aria-label":"Checkbox for following text input"},null,40,ae),t("span",se,q(p.label),1)])])])]))),256)),g(b)?(u(),n("span",te,q(g(b)),1)):F("",!0)]))}},ue={key:0,class:"overlay overlay-page"},ie=t("i",{class:"fas fa-2x fa-sync-alt fa-spin"},null,-1),ne=[ie],re={class:"d-flex mb-4"},de=t("div",{class:"input__label-text"},"Головна картинка",-1),me={class:"mb-4"},pe=t("div",{class:"mb-2"},[t("div",{class:"input__label-text"},"Галерея картинок"),t("div",{class:"input__label-text"},"Размер: 1000х190")],-1),ce={type:"button",class:"btn btn-info mb-4"},ve={key:0,class:"d-flex flex-wrap"},fe={class:"d-flex mb-4"},_e=t("div",{class:"mr-4"},"Тип фільму",-1),ge={class:"d-flex"},be={class:"d-flex mb-4"},Ve=t("div",{class:"mr-4"},"Показ фільму",-1),ye={class:"d-flex"},he={class:"seo-block"},ke=t("h4",{class:"text-center mb-4"},"Seo блок",-1),xe={type:"submit",class:"btn btn-success"},we={key:0,class:"spinner-border spinner-border-sm",role:"status"},$e=t("span",{class:"sr-only"},"Loading...",-1),Ue=[$e],Ie={key:1},Re={__name:"AdminFilmsPageView",setup(v){const f=H(),i=w(!1),a=w(null),b=[{label:"3D",value:"3D"},{label:"2D",value:"2D"},{label:"IMAX",value:"IMAX"}],y=[{label:"В прокаті",value:"isShow"},{label:"Скоро вийде",value:"showSoon"}],e=w({id:D(),type:[],status:null,ua:{name:"",description:"",poster:{},images:[],trailer:"",seo:{url:"",title:"",keywords:"",description:""}},ru:{name:"",description:"",poster:{},images:[],trailer:"",seo:{url:"",title:"",keywords:"",description:""}}});function m(r){if(r.target.files.length)for(let s=0;s<r.target.files.length;s++)e.value[a.value].images.push({fileId:D(),file:r.target.files[s]})}function p(r){e.value[a.value].images.splice(r,1)}function h(){e.value[a.value].poster={}}const k=N();async function S(){const r=L();for(let s in e.value)if(V.some(l=>l.value===s),r){i.value=!0;let l={id:e.value.id,type:e.value.type,status:e.value.status};for(let d in e.value)if(V.some(x=>x.value===d)){const x=await J(e.value[d].images,`films/${e.value.id}`),A=await Q(e.value[d].poster,`films/${e.value.id}`);l={...l,[d]:{...e.value[d],poster:A,images:x}}}const c=X(E,"films",e.value.id);k.params.id?await O(c,l):await z(c,l),i.value=!1}}return j(async()=>{a.value=V[0].value,k.params.id?e.value=await W("films",k.params.id):e.value.status=y[0].value,f.setLoading(!1)}),(r,s)=>g(f).isLoading?(u(),n("div",ue,ne)):(u(),n($,{key:1},[o(G,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=l=>a.value=l),options:g(V),class:"mb-4"},null,8,["modelValue","options"]),o(g(T),{onSubmit:S},{default:K(()=>[o(_,{modelValue:e.value[a.value].name,"onUpdate:modelValue":s[1]||(s[1]=l=>e.value[a.value].name=l),name:"film-name",label:"Назва фільму",rules:"required",class:"col-3 mb-4"},null,8,["modelValue"]),o(U,{modelValue:e.value[a.value].description,"onUpdate:modelValue":s[2]||(s[2]=l=>e.value[a.value].description=l),name:"film-description",label:"Опис",rules:"required",class:"mb-4"},null,8,["modelValue"]),t("div",re,[de,o(I,{modelValue:e.value[a.value].poster,"onUpdate:modelValue":s[3]||(s[3]=l=>e.value[a.value].poster=l),onDeleteImage:h,name:"film-poster","has-text":!1,"has-url":!1,class:"col-2"},null,8,["modelValue"])]),t("div",me,[pe,t("label",ce,[P(" Додати фото "),t("input",{onChange:m,type:"file",multiple:"",accept:"image/png, image/jpeg, image/jpg, image/webp, image/svg",class:"image-upload__input"},null,32)]),e.value[a.value].images.length?(u(),n("div",ve,[(u(!0),n($,null,C(e.value[a.value].images,(l,c)=>(u(),R(I,{modelValue:e.value[a.value].images[c],"onUpdate:modelValue":d=>e.value[a.value].images[c]=d,onDeleteImage:d=>p(c),name:"film-image","has-text":!1,"has-url":!1,class:"col-2 mb-2",key:`film-image-${c}`},null,8,["modelValue","onUpdate:modelValue","onDeleteImage"]))),128))])):F("",!0)]),o(_,{modelValue:e.value[a.value].trailer,"onUpdate:modelValue":s[4]||(s[4]=l=>e.value[a.value].trailer=l),name:"film-trailer",label:"Посилання на трейлер",rules:"required",class:"mb-4"},null,8,["modelValue"]),t("div",fe,[_e,t("div",ge,[o(oe,{modelValue:e.value.type,"onUpdate:modelValue":s[5]||(s[5]=l=>e.value.type=l),options:b,name:"film-type",rules:"required"},null,8,["modelValue"])])]),t("div",be,[Ve,t("div",ye,[o(M,{modelValue:e.value.status,"onUpdate:modelValue":s[6]||(s[6]=l=>e.value.status=l),options:y,name:"film-type",rules:"required"},null,8,["modelValue"])])]),t("div",he,[ke,o(_,{modelValue:e.value[a.value].seo.url,"onUpdate:modelValue":s[7]||(s[7]=l=>e.value[a.value].seo.url=l),name:"seo-url",label:"URL",rules:"required",class:"mb-4"},null,8,["modelValue"]),o(_,{modelValue:e.value[a.value].seo.title,"onUpdate:modelValue":s[8]||(s[8]=l=>e.value[a.value].seo.title=l),name:"seo-title",label:"Title",rules:"required",class:"mb-4"},null,8,["modelValue"]),o(_,{modelValue:e.value[a.value].seo.keywords,"onUpdate:modelValue":s[9]||(s[9]=l=>e.value[a.value].seo.keywords=l),name:"seo-keywords",label:"Keywords",rules:"required",class:"mb-4"},null,8,["modelValue"]),o(U,{modelValue:e.value[a.value].seo.description,"onUpdate:modelValue":s[10]||(s[10]=l=>e.value[a.value].seo.description=l),name:"seo-description",label:"Description",rules:"required",class:"mb-4"},null,8,["modelValue"])]),t("button",xe,[i.value?(u(),n("div",we,Ue)):(u(),n("span",Ie,"Зберегти"))])]),_:1})],64))}};export{Re as default};
