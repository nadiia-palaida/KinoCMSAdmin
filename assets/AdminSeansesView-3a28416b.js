import{o as k,r as v,d as w}from"./index-2c7431f0.js";import{g as _,a as x}from"./queriesFirestore-d3fa99f6.js";import{u as C}from"./general-e95eafb2.js";import{u as L,r as M,c as B,l as S,g as V,q as N,d as r,o as s,e as o,b as e,F as I,k as D,f as m,h as p,i as f,t as a,j as E}from"./index-5ccc9495.js";const F={key:0,class:"overlay overlay-page"},j=e("i",{class:"fas fa-2x fa-sync-alt fa-spin"},null,-1),q=[j],A={key:1},G=e("h4",{class:"text-center mb-4"},"Список сеансів",-1),P={key:0,class:"table"},T=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"#"),e("th",{scope:"col"},"Назва"),e("th",{scope:"col"},"Дата, час"),e("th",{scope:"col"},"Тип"),e("th",{scope:"col"},"Ціна"),e("th",{scope:"col"}),e("th",{scope:"col"})])],-1),$={scope:"row"},z={key:0},H=e("i",{class:"fa-solid fa-pen"},null,-1),J=["onClick"],K=e("i",{class:"fa-solid fa-trash-can"},null,-1),O=[K],Z={__name:"AdminSeansesView",setup(Q){const h="ua",l=C(),g=L(),c=M([]),d=B(()=>{let n=[...c.value];return c.value.forEach(async(u,i)=>{n[i].film=await x("films",u.film_id)}),n});function y(n){g.openModal({component:"PermissionModal",data:{title:"Підтвердження видалення",text:"Ви дійсно хочете видалити цей елемент?"}}).then(async()=>{l.isLoading=!0,await k(v(w,"seanses",n)),c.value=await _("seanses"),l.isLoading=!1})}return S(async()=>{c.value=await _("seanses")}),V(()=>{l.isLoading=!1}),(n,u)=>{const i=N("router-link");return r(l).isLoading?(s(),o("div",F,q)):(s(),o("div",A,[G,r(d).length?(s(),o("table",P,[T,e("tbody",null,[(s(!0),o(I,null,D(r(d),(t,b)=>(s(),o("tr",null,[e("th",$,a(b+1),1),t.film?(s(),o("td",z,a(t.film[h].name),1)):m("",!0),e("td",null,a(t.date)+" "+a(t.time),1),e("td",null,a(t.type),1),e("td",null,a(t.price),1),e("td",null,[p(i,{to:{name:"admin-seans-page",params:{id:t.id}}},{default:f(()=>[H]),_:2},1032,["to"])]),e("td",null,[e("button",{onClick:R=>y(t.id),type:"button"},O,8,J)])]))),256))])])):m("",!0),p(i,{to:{name:"admin-seans-page"},class:"btn btn-info mb-4"},{default:f(()=>[E("Додати сеанс")]),_:1})]))}}};export{Z as default};
