import{u as L,_ as C,F as S,v as w,a as D}from"./RadioComponent-3404cacf.js";import{o as u,e as c,b as t,t as y,f as N,F as k,r as O,d as g,g as b,c as M,h as P,w as $,v as F,i as _,j as T,k as R,a as q,l as E,m as V,n as j,p as G}from"./index-a5d91254.js";import{f as A,u as U,a as K,t as Y,s as z,b as H,r as W,d as B}from"./general-0e5d2b2b.js";const J={class:"input-group mb-4"},Q={key:0,class:"input-group-prepend"},X=["for"],Z=["value","name","id"],ee=["value"],ae={key:1,class:"input__error"},se={__name:"SelectComponent",props:{label:{type:String},options:{type:Array,required:!0},modelValue:{},name:{type:String,required:!0},rules:{}},emits:["update:modelValue"],setup(o){const m=o,{errorMessage:l,value:v}=L(()=>m.name,m.rules);return(a,f)=>(u(),c("div",J,[o.label?(u(),c("div",Q,[t("label",{class:"input-group-text",for:o.name},y(o.label),9,X)])):N("",!0),t("select",{value:o.modelValue,onChange:f[0]||(f[0]=i=>a.$emit("update:modelValue",i.target.value)),class:"custom-select",name:o.name,id:o.name},[(u(!0),c(k,null,O(o.options,i=>(u(),c("option",{value:i.value},y(i.label),9,ee))),256))],40,Z),g(l)?(u(),c("span",ae,y(g(l)),1)):N("",!0)]))}},te={class:"admin__section"},ne={key:0,class:"text-center mb-4"},le={class:"admin__block shadow-lg rounded p-3"},oe={class:"admin__switch-wrap"},ie={class:"custom-control custom-switch custom-switch-lg admin__switch ml-auto"},ue=t("label",{class:"custom-control-label",for:"customSwitch1"},null,-1),re=t("div",{class:"mb-4"},"Размер: 1000х190",-1),de={type:"button",class:"btn btn-info mb-4"},ce={class:"admin__form-images mb-2"},me={type:"submit",class:"btn btn-success"},ve={key:0,class:"spinner-border spinner-border-sm",role:"status"},fe=t("span",{class:"sr-only"},"Loading...",-1),pe=[fe],be={key:1},x={__name:"BannersMultiple",props:{bannersInfo:{type:Object,required:!0},loading:{type:Boolean,default:!1},title:{type:String},firebasePathName:{type:String,required:!0},hasText:{type:Boolean,default:!0}},emits:["saveChanges"],setup(o,{emit:m}){const l=o,v=[{label:"5",value:5},{label:"10",value:10},{label:"15",value:15},{label:"20",value:20},{label:"30",value:30}],a=b({active:!0,items:[],speed:0}),f=M(()=>a.value.items);function i(s,e){a.value.items[e]?a.value.items[e]=s:a.value.items.push(s)}function r(s){if(s.target.files.length)for(let e=0;e<s.target.files.length;e++)a.value.items.push({id:w(),fileId:w(),file:s.target.files[e],url:"",text:""})}function d(s){a.value.items.splice(s,1)}async function h(){let s=[];for(let n=0;n<a.value.items.length;n++){let p=a.value.items[n];s.push({id:p.id,fileId:p.fileId,file:await A(p.fileId,l.firebasePathName)?p.file:await U(`${l.firebasePathName}/${p.fileId}`,p.file),url:p.url,text:p.text})}a.value.items=s;const e={active:a.value.active,items:s,speed:a.value.speed};m("saveChanges",e)}return P(()=>{a.value=l.bannersInfo,a.value.speed||(a.value.speed=v[0].value)}),(s,e)=>(u(),c("section",te,[o.title?(u(),c("h2",ne,y(o.title),1)):N("",!0),t("div",le,[t("div",oe,[t("div",ie,[$(t("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>a.value.active=n),type:"checkbox",class:"custom-control-input",id:"customSwitch1"},null,512),[[F,a.value.active]]),ue])]),re,_(g(S),{onSubmit:h},{default:T(()=>[t("label",de,[R(" Додати фото "),t("input",{onChange:r,type:"file",multiple:"",accept:"image/png, image/jpeg, image/jpg, image/webp, image/svg",class:"image-upload__input"},null,32)]),t("div",ce,[g(f)?(u(!0),c(k,{key:0},O(g(f),(n,p)=>(u(),q(C,{modelValue:n,hasText:o.hasText,"onUpdate:modelValue":I=>i(I,p),onDeleteImage:I=>d(p),class:"mr-4 mb-4",key:`top-banner-image-${n.id}`},null,8,["modelValue","hasText","onUpdate:modelValue","onDeleteImage"]))),128)):N("",!0)]),_(se,{modelValue:a.value.speed,"onUpdate:modelValue":e[1]||(e[1]=n=>a.value.speed=n),options:v,label:"Швидкість каруселі",name:"top-banners-carousel-speed",class:"col-3"},null,8,["modelValue"]),t("button",me,[o.loading?(u(),c("div",ve,pe)):(u(),c("span",be,"Зберегти"))])]),_:1})])]))}},_e={class:"admin__section"},he=t("h2",{class:"text-center mb-4"},"Банер на фоні",-1),ge={class:"admin__block shadow-lg rounded p-3"},ye=t("div",{class:"mb-4"},"Размер: 2000х3000",-1),$e={class:"d-flex"},Ne=t("span",{class:"mr-2"},"Вибрати колір",-1),ke={type:"submit",class:"btn btn-success"},Ie={key:0,class:"spinner-border spinner-border-sm",role:"status"},we=t("span",{class:"sr-only"},"Loading...",-1),Ve=[we],Be={key:1},xe={__name:"BannerBackground",props:{bannersInfo:{type:Object,required:!0},loading:{type:Boolean,default:!1},firebasePathName:{type:String,required:!0}},emits:["saveChanges"],setup(o,{emit:m}){const l=o,v="photo",a="color",f=[{label:" Фото на фон",value:"photo"},{label:"Просто фон",value:"color"}],i=b(null),r=b({file:"",fileId:""}),d=b(null);async function h(){let s=null;d.value===v?(s=r.value,s.file=await A(r.value.fileId,l.firebasePathName)?r.value.file:await U(`${l.firebasePathName}/${r.value.fileId}`,r.value.file)):s=i.value;const e={type:d.value,banner:s};m("saveChanges",e)}return E(()=>{l.bannersInfo.type?(d.value=l.bannersInfo.type,l.bannersInfo.type===v?l.bannersInfo.banner&&l.bannersInfo.banner.hasOwnProperty("file")&&(r.value=l.bannersInfo.banner):l.bannersInfo.type===a&&(i.value=l.bannersInfo.banner)):d.value=f[0].value}),(s,e)=>(u(),c("div",_e,[he,t("div",ge,[ye,_(g(S),{onSubmit:h},{default:T(()=>[t("div",$e,[_(D,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=n=>d.value=n),options:f,name:"background-banner-radio",class:"mr-4"},null,8,["modelValue"]),$(_(C,{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=n=>r.value=n),hasUrl:!1,hasText:!1,class:"col-2"},null,8,["modelValue"]),[[V,d.value===v]]),$(t("div",null,[t("label",null,[Ne,$(t("input",{type:"color","onUpdate:modelValue":e[2]||(e[2]=n=>i.value=n)},null,512),[[j,i.value]])]),t("div",{class:"choose-color",style:G(`background: ${i.value}`)},null,4)],512),[[V,d.value===a]])]),t("button",ke,[o.loading?(u(),c("div",Ie,Ve)):(u(),c("span",Be,"Зберегти"))])]),_:1})])]))}},Ce={key:0,class:"overlay overlay-page"},Se=t("i",{class:"fas fa-2x fa-sync-alt fa-spin"},null,-1),Oe=[Se],Ue={__name:"AdminBannersView",setup(o){const m=b({}),l=K();b(!0);const v=b(!1),a=b(!1),f=b(!1),i="topBanners",r="newsBanners",d="backgroundBanner";async function h(s,e){e===i?v.value=!0:e===r?a.value=!0:e===d&&(f.value=!0),await H(W(B,"banners",e),s),e===i?v.value=!1:e===r?a.value=!1:e===d&&(f.value=!1)}return E(async()=>{l.setLoading(!0),m.value=await Y(z(B,"banners")),m.value.forEach(s=>{m.value[s.id]=s.data()}),l.setLoading(!1)}),(s,e)=>g(l).isLoading?(u(),c("div",Ce,Oe)):(u(),c(k,{key:1},[_(x,{"banners-info":m.value[i],onSaveChanges:e[0]||(e[0]=n=>h(n,i)),firebasePathName:"top-banners",loading:v.value,title:"На головній верх",class:"mb-5"},null,8,["banners-info","loading"]),_(xe,{"banners-info":m.value[d],firebasePathName:"background-banner",onSaveChanges:e[1]||(e[1]=n=>h(n,d)),class:"mb-5"},null,8,["banners-info"]),_(x,{"banners-info":m.value[r],hasText:!1,onSaveChanges:e[2]||(e[2]=n=>h(n,r)),firebasePathName:"news-banners",loading:a.value,title:"На головній новини, акції",class:"mb-5"},null,8,["banners-info","loading"])],64))}};export{Ue as default};
