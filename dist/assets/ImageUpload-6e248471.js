import{r as U,u as k,c as p,g as D,o as c,e as M,b as t,w as g,m as _,d as r,a as V,f as b}from"./index-57ff8659.js";import{_ as I}from"./vee-validate-42a3978c.js";import"./index-8d32edcd.js";import{v}from"./v4-a960c1f4.js";function u(l,s){if(l&&s){const e=new FileReader;e.readAsDataURL(l),e.onload=function(d){s.src=d.target.result}}}const B={class:"image-upload"},R=t("i",{class:"fa-solid fa-circle-xmark fa-xl",style:{color:"#eb0000"}},null,-1),N=[R],T={class:"image-upload__label"},j={class:"image-upload__img-wrap rounded border border-secondary mb-2"},A={class:"fa-solid fa-image"},C=["src"],S=t("div",{class:"btn btn-secondary w-100"},"Додати",-1),z={__name:"ImageUpload",props:{modelValue:{},hasUrl:{type:Boolean,default:!0},hasText:{type:Boolean,default:!0}},emits:["deleteImage","update:modelValue"],setup(l,{emit:s}){const e=l,d="file",y="fileId",h="url",x="text",n=U(null);async function E(o){const a=o.target.files[0];a&&(await i(a,d),await i(v(),y),u(a,n.value))}function i(o,a){s("update:modelValue",{...e.modelValue,[a]:o})}const F=k();async function w(){F.openModal({component:"PermissionModal",data:{title:"Підтвердження видалення",text:"Ви дійсно хочете видалити цей елемент?"}}).then(o=>{s("deleteImage"),e.modelValue.file&&typeof e.modelValue.file=="object"&&u(e.modelValue.file,n.value)}).catch(o=>{})}const f=p(()=>v()),L=p(()=>{if(e.modelValue.file&&typeof e.modelValue.file=="object")u(e.modelValue.file,n.value);else return e.modelValue.file});return D(()=>{e.modelValue.file&&typeof e.modelValue.file=="object"&&u(e.modelValue.file,n.value)}),(o,a)=>(c(),M("div",B,[t("div",{class:"image-upload__cross-btn-wrap"},[t("button",{onClick:w,type:"button",class:"image-upload__cross-btn cross-btn"},N)]),t("div",null,[t("label",T,[t("div",j,[g(t("i",A,null,512),[[_,!l.modelValue.file]]),g(t("img",{src:r(L),ref_key:"imageUploadRef",ref:n,alt:"Upload image",class:"image-upload__img"},null,8,C),[[_,l.modelValue.file]])]),t("input",{onChange:E,type:"file",accept:"image/png, image/jpeg",class:"image-upload__input"},null,32),S]),l.hasUrl?(c(),V(I,{key:0,modelValue:l.modelValue.url,onInput:a[0]||(a[0]=m=>i(m.target.value,h)),rules:"required",name:`film-url-${r(f)}`,label:"URL",class:"mb-4"},null,8,["modelValue","name"])):b("",!0),l.hasText?(c(),V(I,{key:1,modelValue:l.modelValue.text,onInput:a[1]||(a[1]=m=>i(m.target.value,x)),name:`film-text-${r(f)}`,label:"Text"},null,8,["modelValue","name"])):b("",!0)])]))}};export{z as _};
