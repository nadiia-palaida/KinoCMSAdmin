import{u as N,r as _,l as S,q as V,d as M,o as c,e as r,b as e,h as y,C as R,F as g,k as F,f as L,t as o,i as U}from"./index-5ccc9495.js";import{_ as A}from"./InputComponent-926cc09d.js";import{s as B,d as b,o as I,r as Y,c as $,E as j,v as q,I as K,t as G}from"./index-2c7431f0.js";import{b as O,n as T,p as z,s as H}from"./queriesFirestore-d3fa99f6.js";import{c as J}from"./cities-aae58f0e.js";import{u as Q}from"./general-e95eafb2.js";import{h as W}from"./moment-fbc5633a.js";const X={key:0,class:"overlay overlay-page"},Z=e("i",{class:"fas fa-2x fa-sync-alt fa-spin"},null,-1),ee=[Z],te=e("div",{class:"d-flex justify-content-center w-100 mb-4"},[e("h2",{class:"text-center"},"Користувачі")],-1),se={class:"d-flex justify-content-end mb-4"},ae={key:0,class:"table"},ne=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"ID"),e("th",{scope:"col"},"Дата реєстрації"),e("th",{scope:"col"},"День народження"),e("th",{scope:"col"},"Email"),e("th",{scope:"col"},"Телефон"),e("th",{scope:"col"},"ПІБ"),e("th",{scope:"col"},"Псевдонім"),e("th",{scope:"col"},"Місто"),e("th"),e("th")])],-1),oe=e("i",{class:"fa-solid fa-pen"},null,-1),le=["onClick"],ie=e("i",{class:"fa-solid fa-trash-can"},null,-1),ce=[ie],ye={__name:"AdminUsersView",setup(re){const u=Q(),k=N(),a=_({items:[]}),f=_(""),d=_("");function x(s){return`${a.value.items[s].firstName} ${a.value.items[s].lastName}`}function C(s){let n=null;return typeof s=="object"&&(n=J.find(i=>i.value===s.value)),n?n.label:s}function w(s){k.openModal({component:"PermissionModal",data:{title:"Підтвердження видалення",text:"Ви дійсно хочете видалити цей елемент?"}}).then(async()=>{u.isLoading=!0,await I(Y(b,"users",s));const n=$(l,K(p),q(lastVisible),j(m)),i=await G(n);let t=[];i.forEach(h=>{t.push(h.data())}),a.value.items=t,u.isLoading=!1})}function E(s){return s?W(s.toDate()).format("DD.MM.YYYY"):null}const m=5,p="id",l=B(b,"users");async function P(){a.value.items=await T(l,p,m,"nameArr",d.value)}async function D(){a.value.items=await z(l,p,m,"nameArr",d.value)}async function v(){d.value=f.value,a.value.items=await H(l,"nameArr",d.value,"id",5)}return S(async()=>{a.value.items=await O(l,p,m),u.isLoading=!1}),(s,n)=>{const i=V("router-link");return M(u).isLoading?(c(),r("div",X,ee)):(c(),r(g,{key:1},[te,e("div",se,[y(A,{modelValue:f.value,"onUpdate:modelValue":n[0]||(n[0]=t=>f.value=t),onKeyup:R(v,["enter"]),name:"users-search",placeholder:"Пошук",class:"col-4"},null,8,["modelValue","onKeyup"]),e("div",null,[e("button",{onClick:v,class:"btn btn-info"},"Пошук")])]),a.value.items.length?(c(),r("table",ae,[ne,e("tbody",null,[(c(!0),r(g,null,F(a.value.items,(t,h)=>(c(),r("tr",null,[e("th",null,o(t.id),1),e("td",null,o(E(t.created)),1),e("td",null,o(t.birthDate),1),e("td",null,o(t.email),1),e("td",null,o(t.phone),1),e("td",null,o(x(h)),1),e("td",null,o(t.nick),1),e("td",null,o(C(t.city)),1),e("td",null,[y(i,{to:{name:"admin-users-page",params:{id:t.id}}},{default:U(()=>[oe]),_:2},1032,["to"])]),e("td",null,[e("button",{onClick:ue=>w(t.id),type:"button"},ce,8,le)])]))),256))])])):L("",!0),e("nav",{"aria-label":"Page navigation example"},[e("ul",{class:"pagination"},[e("li",{class:"page-item"},[e("button",{onClick:D,type:"button",class:"page-link"},"Previous")]),e("li",{class:"page-item"},[e("button",{onClick:P,type:"button",class:"page-link"},"Next")])])])],64))}}};export{ye as default};
