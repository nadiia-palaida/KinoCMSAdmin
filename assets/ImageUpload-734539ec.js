import{r as D,u as M,c as g,A,g as B,o as u,e as V,b as t,w as b,m as y,d as i,t as R,f,a as v}from"./index-5ccc9495.js";import{u as N,_ as I}from"./InputComponent-926cc09d.js";import"./vee-validate-6f28d402.js";import"./index-dbcece3d.js";import{v as h}from"./v4-a960c1f4.js";function d(a,s){if(a&&s){const e=new FileReader;e.readAsDataURL(a),e.onload=function(m){s.src=m.target.result}}}const S={class:"image-upload"},T=t("i",{class:"fa-solid fa-circle-xmark fa-xl",style:{color:"#eb0000"}},null,-1),j=[T],C={class:"image-upload__label"},$={class:"image-upload__img-wrap rounded border border-secondary mb-2"},q={class:"fa-solid fa-image"},P=["src"],X=t("div",{class:"btn btn-secondary w-100"},"Додати",-1),z={key:0,class:"input__error error"},W={__name:"ImageUpload",props:{modelValue:{},hasUrl:{type:Boolean,default:!0},hasText:{type:Boolean,default:!0},name:{type:String},rules:{},errors:{type:Array}},emits:["deleteImage","update:modelValue"],setup(a,{emit:s}){const e=a,m="file",x="fileId",F="url",E="text",n=D(null);async function k(o){const l=o.target.files[0];l&&(await r(l,m),await r(h(),x),d(l,n.value))}function r(o,l){s("update:modelValue",{...e.modelValue,[l]:o})}const w=M();async function L(){w.openModal({component:"PermissionModal",data:{title:"Підтвердження видалення",text:"Ви дійсно хочете видалити цей елемент?"}}).then(o=>{s("deleteImage"),e.modelValue.file&&typeof e.modelValue.file=="object"&&d(e.modelValue.file,n.value)}).catch(o=>{})}const p=g(()=>h()),U=g(()=>{if(e.modelValue.file&&typeof e.modelValue.file=="object")d(e.modelValue.file,n.value);else return e.modelValue.file}),{errorMessage:_,value:G}=A(N(()=>e.name,o=>!!o&&!!o.file));return B(()=>{e.modelValue.file&&typeof e.modelValue.file=="object"&&d(e.modelValue.file,n.value)}),(o,l)=>(u(),V("div",S,[t("div",{class:"image-upload__cross-btn-wrap"},[t("button",{onClick:L,type:"button",class:"image-upload__cross-btn cross-btn"},j)]),t("div",null,[t("label",C,[t("div",$,[b(t("i",q,null,512),[[y,!a.modelValue.file]]),b(t("img",{src:i(U),ref_key:"imageUploadRef",ref:n,alt:"Upload image",class:"image-upload__img"},null,8,P),[[y,a.modelValue.file]])]),t("input",{onChange:k,type:"file",accept:"image/png, image/jpeg",class:"image-upload__input"},null,32),X,i(_)?(u(),V("span",z,R(i(_)),1)):f("",!0)]),a.hasUrl?(u(),v(I,{key:0,modelValue:a.modelValue.url,onInput:l[0]||(l[0]=c=>r(c.target.value,F)),rules:"required",name:`film-url-${i(p)}`,label:"URL",class:"mb-4"},null,8,["modelValue","name"])):f("",!0),a.hasText?(u(),v(I,{key:1,modelValue:a.modelValue.text,onInput:l[1]||(l[1]=c=>r(c.target.value,E)),name:`film-text-${i(p)}`,label:"Text"},null,8,["modelValue","name"])):f("",!0)])]))}};export{W as _};
