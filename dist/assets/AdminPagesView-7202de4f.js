import{u as x}from"./general-332ba11c.js";import{t as L,s as A,d as u,o as C,r as P}from"./index-08899976.js";import{u as D,r as E,l as S,g as V,q as B,d as Y,o,e as n,b as t,h as _,i as f,F as h,k as j,f as m,j as G,t as i}from"./index-49708047.js";import{h as T}from"./moment-fbc5633a.js";const q={key:0,class:"overlay overlay-page"},F=t("i",{class:"fas fa-2x fa-sync-alt fa-spin"},null,-1),R=[F],I={class:"d-flex justify-content-between"},O=t("div",{class:"d-flex justify-content-center w-100"},[t("h2",{class:"text-center"},"Список Сторінок")],-1),$={key:0,class:"table"},z=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"#"),t("th",{scope:"col"},"Назва"),t("th",{scope:"col"},"Дата створення"),t("th",{scope:"col"},"Статус"),t("th",{scope:"col"}),t("th",{scope:"col"})])],-1),H={scope:"row"},J=t("i",{class:"fa-solid fa-pen"},null,-1),K=["onClick"],Q=t("i",{class:"fa-solid fa-trash-can"},null,-1),U=[Q],st={__name:"AdminPagesView",setup(W){const p="main",g="contacts",c=x(),y=D(),l=E([]),b="ua";S(()=>{c.isLoading=!1});async function r(){const e=await L(A(u,"pages"));l.value=[],e.forEach(a=>{l.value.push(a.data())})}function k(e){y.openModal({component:"PermissionModal",data:{title:"Підтвердження видалення",text:"Ви дійсно хочете видалити цей елемент?"}}).then(async()=>{c.isLoading=!0,await C(P(u,"pages",e)),await r(),c.isLoading=!1})}function v(e){return e?"ВКЛ":"ВИКЛ"}function M(e){return T(e.toDate()).format("DD.MM.YYYY")}function w(e){let a=null;switch(e){case p:a="admin-pages-main";break;case g:a="admin-pages-contacts";break;default:a="admin-pages-default"}return a}return V(async()=>{await r(),c.isLoading=!1}),(e,a)=>{const d=B("router-link");return Y(c).isLoading?(o(),n("div",q,R)):(o(),n(h,{key:1},[t("div",I,[O,_(d,{to:{name:"admin-pages-default"},class:"btn btn-info mb-4"},{default:f(()=>[G("Створити сторінку")]),_:1})]),l.value.length?(o(),n("table",$,[z,t("tbody",null,[(o(!0),n(h,null,j(l.value,(s,N)=>(o(),n("tr",null,[t("th",H,i(N+1),1),t("td",null,i(s[b].name),1),t("td",null,i(M(s.created)),1),t("td",null,i(v(s.active)),1),t("td",null,[_(d,{to:{name:w(s.id),params:{id:s.id}}},{default:f(()=>[J]),_:2},1032,["to"])]),t("td",null,[s.canDelete?(o(),n("button",{key:0,onClick:X=>k(s.id),type:"button"},U,8,K)):m("",!0)])]))),256))])])):m("",!0)],64))}}};export{st as default};
