import{u as D}from"./general-332ba11c.js";import{l as c,_ as q,a as V}from"./TextareaComponent-21f0aea7.js";import{a as C,_ as m,F as L}from"./vee-validate-c2eed9a0.js";import{_ as S}from"./ImageUpload-e549be2c.js";import{r as b,d as g,J as F,V as R,c as B}from"./index-08899976.js";import{r as v,x as K,s as N,l as J,d as _,o as i,e as r,b as n,h as d,i as P,F as h,k as A,f as E}from"./index-49708047.js";import"./index-403c6953.js";import"./v4-a960c1f4.js";const G={key:0,class:"overlay overlay-page"},M=n("i",{class:"fas fa-2x fa-sync-alt fa-spin"},null,-1),O=[M],T={class:"d-flex"},j={class:"border border-secondary rounded p-4 mb-4"},z={class:"row"},H={key:0,class:"custom-control custom-switch custom-switch-lg admin__switch col-6"},Q=["modelValue","on:update:modelValue"],W=n("label",{class:"custom-control-label",for:"customSwitch1"},null,-1),X={class:"d-flex mb-4"},Y=n("div",{class:"input__label-text"},"Лого",-1),Z={class:"seo-block"},I=n("h4",{class:"text-center mb-4"},"Seo блок",-1),ee={type:"submit",class:"btn btn-success"},ae={key:0,class:"spinner-border spinner-border-sm",role:"status"},le=n("span",{class:"sr-only"},"Loading...",-1),oe=[le],se={key:1},ve={__name:"ContactsPageView",setup(te){const f=D(),o=v(null),p=v(!1),a=v({id:"contacts",created:"",canDelete:!1,ua:{name:"Контакти",cinemas:[{name:"",address:"",location:"",logo:"",active:!0}],seo:{url:"",title:"",text:"",keywords:"",description:""}},ru:{name:"Контакти",cinemas:[{name:"",address:"",location:"",logo:"",active:!0}],seo:{url:"",title:"",text:"",keywords:"",description:""}}});function y(u){a.value[o.value].cinemas[u].logo={}}function k(){for(let u in a.value)c.some(l=>l.value===u)&&a.value[u].cinemas.push({name:"",address:"",location:"",logo:"",active:!0})}function w(u,l){for(let e in a.value)c.some(s=>s.value===e)&&(a.value[e].cinemas[u].active=l)}const U=K(),$=N();async function x(){if(C()){p.value=!0;let l={id:a.value.id,canDelete:a.value.canDelete};for(let s in a.value)c.some(t=>t.value===s)&&(l={...l,created:$.params.id?a.value.created:R(),[s]:{...a.value[s]}});const e=b(g,"pages",a.value.id);await B(e,l),await U.replace({name:"admin-pages"}),p.value=!1}}return J(async()=>{o.value=c[0].value;const u=b(g,"pages",a.value.id),l=await F(u);l.exists()&&(a.value=l.data()),f.isLoading=!1}),(u,l)=>_(f).isLoading?(i(),r("div",G,O)):(i(),r(h,{key:1},[n("div",T,[d(q,{modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=e=>o.value=e),options:_(c),class:"mb-4"},null,8,["modelValue","options"])]),d(_(L),{onSubmit:x},{default:P(()=>[(i(!0),r(h,null,A(a.value[o.value].cinemas,(e,s)=>(i(),r("div",j,[n("div",z,[d(m,{modelValue:e.name,"onUpdate:modelValue":t=>e.name=t,name:`contacts-page-cinema-name-${s}`,label:"Назва кінотеатра",rules:"required",class:"col-6 mb-4"},null,8,["modelValue","onUpdate:modelValue","name"]),s!==0?(i(),r("div",H,[n("input",{modelValue:e.active,"on:update:modelValue":t=>w(s,t.checked),type:"checkbox",class:"custom-control-input",id:"customSwitch1"},null,40,Q),W])):E("",!0)]),d(V,{modelValue:e.address,"onUpdate:modelValue":t=>e.address=t,name:`contacts-page-cinema-address-${s}`,label:"Адреса",rules:"required",class:"mb-4"},null,8,["modelValue","onUpdate:modelValue","name"]),d(m,{modelValue:e.location,"onUpdate:modelValue":t=>e.location=t,name:`contacts-page-cinema-location-${s}`,label:"Координати для карти",rules:"required",class:"col-6 mb-4"},null,8,["modelValue","onUpdate:modelValue","name"]),n("div",X,[Y,d(S,{modelValue:e.logo,"onUpdate:modelValue":t=>e.logo=t,onDeleteImage:t=>y(s),name:`contacts-page-cinema-logo-${s}`,"has-text":!1,"has-url":!1,class:"col-2"},null,8,["modelValue","onUpdate:modelValue","onDeleteImage","name"])])]))),256)),n("button",{onClick:k,type:"button",class:"btn btn-info"},"Додати кінотеатр"),n("div",Z,[I,d(m,{modelValue:a.value[o.value].seo.url,"onUpdate:modelValue":l[1]||(l[1]=e=>a.value[o.value].seo.url=e),name:"seo-url",label:"URL",rules:"required",class:"mb-4"},null,8,["modelValue"]),d(m,{modelValue:a.value[o.value].seo.title,"onUpdate:modelValue":l[2]||(l[2]=e=>a.value[o.value].seo.title=e),name:"seo-title",label:"Title",rules:"required",class:"mb-4"},null,8,["modelValue"]),d(m,{modelValue:a.value[o.value].seo.keywords,"onUpdate:modelValue":l[3]||(l[3]=e=>a.value[o.value].seo.keywords=e),name:"seo-keywords",label:"Keywords",rules:"required",class:"mb-4"},null,8,["modelValue"]),d(V,{modelValue:a.value[o.value].seo.description,"onUpdate:modelValue":l[4]||(l[4]=e=>a.value[o.value].seo.description=e),name:"seo-description",label:"Description",rules:"required",class:"mb-4"},null,8,["modelValue"])]),n("button",ee,[p.value?(i(),r("div",ae,oe)):(i(),r("span",se,"Зберегти"))])]),_:1})],64))}};export{ve as default};
