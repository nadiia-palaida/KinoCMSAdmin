import{u as v}from"./general-4d5aa9bd.js";import{t as k,s as w,d as u,o as x,r as L}from"./index-08899976.js";import{u as M,r as C,l as S,g as V,q as B,d as N,o as a,e as n,b as t,h as _,i as f,F as h,k as P,f as j,j as q,t as c}from"./index-57ff8659.js";const E={key:0,class:"overlay overlay-page"},F=t("i",{class:"fas fa-2x fa-sync-alt fa-spin"},null,-1),A=[F],D={class:"d-flex justify-content-between"},G=t("div",{class:"d-flex justify-content-center w-100"},[t("h2",{class:"text-center"},"Список акцій")],-1),T={key:0,class:"table"},$=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"#"),t("th",{scope:"col"},"Назва"),t("th",{scope:"col"},"Дата створення"),t("th",{scope:"col"},"Статус"),t("th",{scope:"col"}),t("th",{scope:"col"})])],-1),z={scope:"row"},H=t("i",{class:"fa-solid fa-pen"},null,-1),J=["onClick"],K=t("i",{class:"fa-solid fa-trash-can"},null,-1),O=[K],Y={__name:"AdminPromotionsView",setup(Q){const o=v(),p=M(),l=C([]),m="ua";S(()=>{o.isLoading=!1});async function i(){const e=await k(w(u,"promotions"));l.value=[],e.forEach(r=>{l.value.push(r.data())})}function g(e){p.openModal({component:"PermissionModal",data:{title:"Підтвердження видалення",text:"Ви дійсно хочете видалити цей елемент?"}}).then(async()=>{o.isLoading=!0,await x(L(u,"promotions",e)),await i(),o.isLoading=!1})}function y(e){return e?"ВКЛ":"ВИКЛ"}return V(async()=>{await i(),o.isLoading=!1}),(e,r)=>{const d=B("router-link");return N(o).isLoading?(a(),n("div",E,A)):(a(),n(h,{key:1},[t("div",D,[G,_(d,{to:{name:"admin-promotions-page"},class:"btn btn-info mb-4"},{default:f(()=>[q("Створити акцію")]),_:1})]),l.value.length?(a(),n("table",T,[$,t("tbody",null,[(a(!0),n(h,null,P(l.value,(s,b)=>(a(),n("tr",null,[t("th",z,c(b+1),1),t("td",null,c(s[m].name),1),t("td",null,c(s.publication_date),1),t("td",null,c(y(s.active)),1),t("td",null,[_(d,{to:{name:"admin-promotions-page",params:{id:s.id}}},{default:f(()=>[H]),_:2},1032,["to"])]),t("td",null,[t("button",{onClick:R=>g(s.id),type:"button"},O,8,J)])]))),256))])])):j("",!0)],64))}}};export{Y as default};
