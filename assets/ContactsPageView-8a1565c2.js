import{_ as D}from"./TabsComponent-2b439d40.js";import{a as q,_ as m,F as L}from"./InputComponent-926cc09d.js";import{_ as V}from"./TextareaComponent-3fceddef.js";import{_ as F}from"./ImageUpload-734539ec.js";import{l as c}from"./languages-14535d94.js";import{a as x}from"./preparedDataToFirebase-469b79a8.js";import{V as B,r as K,d as S,b as R}from"./index-2c7431f0.js";import{r as f,x as N,s as P,l as T,d as _,o as r,e as d,b as t,h as i,i as j,F as g,k as A,f as E}from"./index-5ccc9495.js";import{u as G}from"./general-e95eafb2.js";import{a as M}from"./queriesFirestore-d3fa99f6.js";import"./vee-validate-6f28d402.js";import"./index-dbcece3d.js";import"./v4-a960c1f4.js";const O={key:0,class:"overlay overlay-page"},z=t("i",{class:"fas fa-2x fa-sync-alt fa-spin"},null,-1),H=[z],J={class:"d-flex"},Q={class:"row"},W={class:"custom-control custom-switch custom-switch-lg admin__switch col-3"},X=["checked","onChange","id"],Y=["for"],Z={class:"col-3 d-flex justify-content-end align-items-start"},I=["onClick"],ee=t("i",{class:"fa-solid fa-trash-can fa-2xl"},null,-1),ae=[ee],le={class:"d-flex mb-4"},oe=t("div",{class:"input__label-text"},"Лого",-1),se={class:"seo-block"},te=t("h4",{class:"text-center mb-4"},"Seo блок",-1),ne={type:"submit",class:"btn btn-success"},ue={key:0,class:"spinner-border spinner-border-sm",role:"status"},ie=t("span",{class:"sr-only"},"Loading...",-1),re=[ie],de={key:1},$e={__name:"ContactsPageView",setup(ce){const b=G(),n=f(null),v=f(!1),e=f({id:"contacts",created:"",canDelete:!1,ua:{name:"Контакти",cinemas:[{name:"",address:"",location:"",logo:"",active:!0}],seo:{url:"",title:"",text:"",keywords:"",description:""}},ru:{name:"Контакти",cinemas:[{name:"",address:"",location:"",logo:"",active:!0}],seo:{url:"",title:"",text:"",keywords:"",description:""}}});function h(){for(let u in e.value)c.some(l=>l.value===u)&&e.value[u].cinemas.push({name:"",address:"",location:"",logo:"",active:!0})}function y(u,l){for(let a in e.value)c.some(o=>o.value===a)&&(e.value[a].cinemas[u].active=l)}function k(u){for(let l in e.value)c.some(a=>a.value===l)&&e.value[l].cinemas.splice(u,1)}function w(u){e.value[n.value].cinemas[u].logo={}}const U=N(),$=P();async function C(){if(q()){v.value=!0;let l={id:e.value.id,canDelete:e.value.canDelete};for(let o in e.value)if(c.some(s=>s.value===o)){let s=[];for(let p=0;p<e.value[o].cinemas.length;p++)s.push({...e.value[o].cinemas[p],logo:await x(e.value[o].cinemas[p].logo,"pages/contacts")});l={...l,created:$.params.id?e.value.created:B(),[o]:{...e.value[o],cinemas:s}}}const a=K(S,"pages",e.value.id);await R(a,l),await U.replace({name:"admin-pages"}),v.value=!1}}return T(async()=>{n.value=c[0].value,e.value=await M("pages",e.value.id),b.isLoading=!1}),(u,l)=>_(b).isLoading?(r(),d("div",O,H)):(r(),d(g,{key:1},[t("div",J,[i(D,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=a=>n.value=a),options:_(c),class:"mb-4"},null,8,["modelValue","options"])]),i(_(L),{onSubmit:C},{default:j(()=>[(r(!0),d(g,null,A(e.value[n.value].cinemas,(a,o)=>(r(),d("div",{class:"border border-secondary rounded p-4 mb-4",key:`contacts-cinema-${o}`},[t("div",Q,[i(m,{modelValue:a.name,"onUpdate:modelValue":s=>a.name=s,name:`contacts-page-cinema-name-${o}`,label:"Назва кінотеатра",rules:"required",class:"col-6 mb-4"},null,8,["modelValue","onUpdate:modelValue","name"]),o!==0?(r(),d(g,{key:0},[t("div",W,[t("input",{checked:a.active,onChange:s=>y(o,s.target.checked),type:"checkbox",class:"custom-control-input",id:`customSwitch-${o}`},null,40,X),t("label",{class:"custom-control-label",for:`customSwitch-${o}`},null,8,Y)]),t("div",Z,[t("button",{onClick:s=>k(o),type:"button"},ae,8,I)])],64)):E("",!0)]),i(V,{modelValue:a.address,"onUpdate:modelValue":s=>a.address=s,name:`contacts-page-cinema-address-${o}`,label:"Адреса",rules:"required",class:"mb-4"},null,8,["modelValue","onUpdate:modelValue","name"]),i(m,{modelValue:a.location,"onUpdate:modelValue":s=>a.location=s,name:`contacts-page-cinema-location-${o}`,label:"Координати для карти",rules:"required",class:"col-6 mb-4"},null,8,["modelValue","onUpdate:modelValue","name"]),t("div",le,[oe,i(F,{modelValue:a.logo,"onUpdate:modelValue":s=>a.logo=s,onDeleteImage:s=>w(o),name:`contacts-page-cinema-logo-${o}`,"has-text":!1,"has-url":!1,class:"col-2"},null,8,["modelValue","onUpdate:modelValue","onDeleteImage","name"])])]))),128)),t("button",{onClick:h,type:"button",class:"btn btn-info"},"Додати кінотеатр"),t("div",se,[te,i(m,{modelValue:e.value[n.value].seo.url,"onUpdate:modelValue":l[1]||(l[1]=a=>e.value[n.value].seo.url=a),name:"seo-url",label:"URL",rules:"required",class:"mb-4"},null,8,["modelValue"]),i(m,{modelValue:e.value[n.value].seo.title,"onUpdate:modelValue":l[2]||(l[2]=a=>e.value[n.value].seo.title=a),name:"seo-title",label:"Title",rules:"required",class:"mb-4"},null,8,["modelValue"]),i(m,{modelValue:e.value[n.value].seo.keywords,"onUpdate:modelValue":l[3]||(l[3]=a=>e.value[n.value].seo.keywords=a),name:"seo-keywords",label:"Keywords",rules:"required",class:"mb-4"},null,8,["modelValue"]),i(V,{modelValue:e.value[n.value].seo.description,"onUpdate:modelValue":l[4]||(l[4]=a=>e.value[n.value].seo.description=a),name:"seo-description",label:"Description",rules:"required",class:"mb-4"},null,8,["modelValue"])]),t("button",ne,[v.value?(r(),d("div",ue,re)):(r(),d("span",de,"Зберегти"))])]),_:1})],64))}};export{$e as default};
