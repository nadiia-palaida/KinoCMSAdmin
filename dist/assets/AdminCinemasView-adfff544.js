import{u as x}from"./general-332ba11c.js";import{t as w,s as $,d as p,o as C,r as D}from"./index-08899976.js";import{c as L,q as g,o as a,e as n,b as o,f as v,h as _,i as y,d as i,t as B,u as M,r as N,g as S,F as h,k as V,j as q}from"./index-49708047.js";const A={class:"film-card position-relative"},E={class:"position-relative"},G={key:0,class:"image-upload__cross-btn-wrap"},j=o("i",{class:"fa-solid fa-circle-xmark fa-xl",style:{color:"#eb0000"}},null,-1),F=[j],I={class:"film-card__img-wrap mb-3"},O=["src","alt"],H={class:"text-center"},P={__name:"CinemaCard",props:{cinema:{type:Object,required:!0},canDelete:{type:Boolean,default:!0}},setup(r){const t=r,d="ua",e=L(()=>({id:t.cinema.id,...t.cinema[d]}));return(m,c)=>{const l=g("router-link");return a(),n("div",A,[o("div",E,[r.canDelete?(a(),n("div",G,[o("button",{onClick:c[0]||(c[0]=s=>m.$emit("delete")),type:"button",class:"image-upload__cross-btn cross-btn"},F)])):v("",!0),_(l,{to:{name:"admin-cinemas-page",params:{id:i(e).id}}},{default:y(()=>[o("div",I,[o("img",{src:i(e).logo.file,alt:i(e).name,class:"film-card__img"},null,8,O)]),o("div",H,B(i(e).name),1)]),_:1},8,["to"])])])}}},T={key:0,class:"overlay overlay-page"},U=o("i",{class:"fas fa-2x fa-sync-alt fa-spin"},null,-1),W=[U],Y={key:0,class:"films-list d-flex flex-wrap mb-4"},z={class:"films-list__item mr-4"},X={__name:"AdminCinemasView",setup(r){const t=x(),d=M(),e=N([]);function m(s){d.openModal({component:"PermissionModal",data:{title:"Підтвердження видалення",text:"Ви дійсно хочете видалити цей елемент?"}}).then(async()=>{t.isLoading=!0,await C(D(p,"cinemas",s)),await l(),t.isLoading=!1})}function c(s){return s!==0}async function l(){const s=await w($(p,"cinemas"));e.value=[],s.forEach(u=>{e.value.push(u.data())})}return S(async()=>{await l(),t.isLoading=!1}),(s,u)=>{const b=g("router-link");return i(t).isLoading?(a(),n("div",T,W)):(a(),n(h,{key:1},[e.value.length?(a(),n("ul",Y,[(a(!0),n(h,null,V(e.value,(f,k)=>(a(),n("li",z,[_(P,{cinema:f,canDelete:c(k),onDelete:J=>m(f.id),class:"col-3"},null,8,["cinema","canDelete","onDelete"])]))),256))])):v("",!0),_(b,{to:{name:"admin-cinemas-page"},class:"btn btn-info mb-4"},{default:y(()=>[q("Додати кінотеатр")]),_:1})],64))}}};export{X as default};
